{% extends 'base.html.twig' %}

{% block title %}Liste des catégories{% endblock %}

{% block body %}
<style>
:root{--red:#c40000;--green:#3dad48;--thead:#f8f8f8}
.container_table{max-width:900px;margin:0 auto;overflow-x:hidden;overflow-y:visible;padding:0 10px}
.titre{margin-bottom:4px;color:#353b44;font-size:1.8rem}
.btn-primary{background:#353b44;color:#fff;padding:10px 12px;border-radius:6px;text-decoration:none;font-weight:bold;font-size:.9rem;display:inline-block}
.btn-primary:hover{background:#18191bff}
table{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1);table-layout:fixed;word-wrap:break-word;font-size:.85rem;overflow:visible}
thead{background:var(--thead)}
th,td{padding:8px 6px;text-align:left;border-bottom:1px solid #ddd;overflow-wrap:break-word;white-space:normal}
.actions a{padding:4px 8px;border-radius:5px;text-decoration:none;font-size:12px}
.actions a.edit{background:var(--green);color:#fff}
.actions a.delete{background:var(--red);color:#fff}
.actions a:hover{opacity:.85}
.footer-table{margin-top:15px;display:flex;align-items:center;justify-content:space-between}
.footer-table .pagination{flex-grow:1;text-align:left;margin-left:45px;display:flex;gap:8px;justify-content:flex-start;align-items:center;list-style:none;padding:0}
.pagination a{color:gray;text-decoration:none;padding:6px 10px;border-radius:4px;border:1px solid transparent;transition:background-color .3s ease}
.pagination span.current{color:black;font-weight:bold;padding:6px 10px;border-radius:4px;border:1px solid #000;background-color:#e0e0e0}
.pagination a:hover{background-color:#f0f0f0;border-color:#ccc;color:#333}
.flash-success{color:green;margin-bottom:15px}
</style>

<div class="container_table">
  {% for message in app.flashes('success') %}
    <div class="flash-success">{{ message }}</div>
  {% endfor %}

  <h1 class="titre">Liste des catégories</h1>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nom</th>
        <th>Description</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% set hasAny = false %}
      {% for categorie in pagination %}
        {% if categorie.status == 1 %}
          {% set hasAny = true %}
          <tr>
            <td>{{ categorie.id }}</td>
            <td>{{ categorie.nom }}</td>
            <td>{{ categorie.description }}</td>
            <td>Actif</td>
            <td class="actions">
              <a href="{{ path('categorie_edit', {'id': categorie.id}) }}" class="edit">Modifier</a>
              <a href="{{ path('categorie_update_status', {'id': categorie.id}) }}" class="delete">supprimée </a>
            </td>
          </tr>
        {% endif %}
      {% endfor %}

      {% if not hasAny %}
        <tr>
          <td colspan="5">Aucune catégorie active trouvée.</td>
        </tr>
      {% endif %}
    </tbody>
  </table>

  <div class="footer-table">
    <a href="{{ path('categorie_new') }}" class="btn btn-primary">Ajouter une catégorie</a>
    <div class="pagination">
      {{ knp_pagination_render(pagination) }}
    </div>
  </div>
</div>
{% endblock %}
