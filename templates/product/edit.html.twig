{% extends 'base.html.twig' %}

{% block title %}Modifier un produit{% endblock %}

{% block body %}
<style>
    form {
        width: 50%;
        margin-top: 20px;
    }
    select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        background-color: white;
        height: 45px;
        font-family: inherit;
        margin-bottom: 15px;
    }
    .titre {
        color: #101317;
        margin: 0;
        padding: 0;
        font-weight: bold;
        font-size: 2rem;
    }
    label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
    }
    input[type="text"],
    input[type="number"],
    textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        background-color: white;
        box-sizing: border-box;
        height: 45px;
        font-family: inherit;
    }
    textarea {
        min-height: 100px;
        resize: vertical;
        padding: 12px 16px;
        height: auto;
    }
    .submit-btn {
        background-color: #353b44;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 4px;
        font-size: 15px;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.2s;
        margin-top: 20px;
        display: block;
        width: 100px;
        float: right;
    }
    .submit-btn:hover {
        background-color: #24282dff;
    }
    .flash-success {
        color: green;
        margin-bottom: 15px;
    }
    .flash-error {
        color: red;
        margin-bottom: 15px;
    }
    .row_1,
    .row_2 {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
    }
    .row_1 > div,
    .row_2 > div {
        flex: 1;
    }
    .container_prix {
        display: flex;
        align-items: center;
        gap: 0;
    }
    .container_prix input[type="number"] {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        border: 1px solid #ccc;
        border-right: none;
        padding: 8px;
        height: 45px;
        width: 100%;
        box-sizing: border-box;
    }
    .container_prix label.curancy {
        background-color: #e2e6e8;
        border: 1px solid #ccc;
        border-left: none;
        border-top-right-radius: 4px;
        border-bottom-right-radius: 4px;
        height: 45px;
        width: 50px;
        color: #101317;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        cursor: default;
        margin-top: 30px;
    }
</style>

<h1 class="titre">Modifier le produit</h1>

{% for message in app.flashes('success') %}
    <div class="flash-success">{{ message }}</div>
{% endfor %}
{% for message in app.flashes('error') %}
    <div class="flash-error">{{ message }}</div>
{% endfor %}

<form action="{{ path('product_edit', {'id': product.id}) }}" method="POST">
    <input type="hidden" name="_method" value="PUT">

    <div class="row_1">
        <div>
            <label for="nom">Nom :</label>
            <input type="text" id="nom" name="nom" required value="{{ product.nom }}">
            {% if errors.nom is defined %}
                <div style="color:red; font-size: 0.9em;">{{ errors.nom[0] }}</div>
            {% endif %}
        </div>
        
        <div>
            <label for="categorie">Catégorie :</label>
            <select id="categorie" name="categorie" class="form-control" required>
                <option value="">Sélectionnez une catégorie</option>
                {% for categorie in categories %}
                    <option value="{{ categorie.id }}" {{ product.categorie and product.categorie.id == categorie.id ? 'selected' : '' }}>
                        {{ categorie.nom }}
                    </option>
                {% endfor %}
            </select>
            {% if errors.categorie is defined %}
                <div style="color:red; font-size: 0.9em;">{{ errors.categorie[0] }}</div>
            {% endif %}
        </div>

        <div class="container_prix">
            <div style="flex: 1;">
                <label for="prix">Prix :</label>
                <input type="text" step="0.01" id="prix" name="prix"  value="{{ product.prix }}">
                {% if errors.prix is defined %}
                    <div style="color:red; font-size: 0.9em;">{{ errors.prix[0] }}</div>
                {% endif %}
            </div>
            <label class="curancy" for="prix">MAD</label>
        </div>
    </div>

    <div class="row_2">
        <div>
            <label for="description">Description :</label>
            <textarea id="description" name="description" >{{ product.description }}</textarea>
            {% if errors.description is defined %}
                <div style="color:red; font-size: 0.9em;">{{ errors.description[0] }}</div>
            {% endif %}
        </div>

        <div>
            <label for="quantite">Quantité :</label>
            <input type="text" id="quantite" name="quantite"  value="{{ product.quantite }}">
            {% if errors.quantite is defined %}
                <div style="color:red; font-size: 0.9em;">{{ errors.quantite[0] }}</div>
            {% endif %}
        </div>
    </div>

    <input type="hidden" name="status" value="{{ product.status ? 1 : 0 }}">

    <button class="submit-btn" type="submit">Modifier</button>
</form>

{% endblock %}
